(function(t){function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var e={};return r.m=t,r.c=e,r.p="dist/",r(0)})({0:function(t,e,r){Batman.extend(Batman,{TestCase:r(1),ModelTestCase:r(2),ControllerTestCase:r(3)})},1:function(module,exports,__webpack_require__){var TestCase,__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};module.exports=TestCase=function(_super){function TestCase(){this._expectations={},this._refutations={}}return __extends(TestCase,_super),TestCase.Test=function(){function t(t,e,r){this.name=t,this.expected=e,this.testFunction=r}return t.prototype.run=function(t){var e;return e=sinon.test(this.testFunction).bind(t),e=t.expectationsWrapper(e),e=t.xhrWrapper(e),QUnit.test(this.name,this.expected,e)},t}(),TestCase.test=function(t,e,r){return"function"==typeof e&&(r=e,e=null),this.tests||(this.tests=[]),this.tests.push(new this.Test(t,e,r))},TestCase.prototype.runTests=function(){var t,e,r,n;QUnit.module(this.constructor.name,{setup:this.xhrWrapper(this.setup.bind(this)),teardown:this.xhrWrapper(this.teardown.bind(this))}),r=this.constructor.tests,n=[];for(t in r)e=r[t],n.push(e.run(this));return n},TestCase.prototype.setup=function(){},TestCase.prototype.teardown=function(){},TestCase.prototype["continue"]=function(){return QUnit.start()},TestCase.prototype.wait=function(){return QUnit.stop()},TestCase.prototype.assert=function(t,e){return null==e&&(e="was not true"),QUnit.ok(t,e)},TestCase.prototype.refute=function(t,e){return null==e&&(e="was not false"),QUnit.ok(!t,e)},TestCase.prototype.assertEqual=function(t,e,r){return QUnit.ok(this._areEquivalent(t,e),r||"Expected: "+t+" \nGot: "+e)},TestCase.prototype.assertNotEqual=function(t,e,r){return QUnit.ok(!this._areEquivalent(t,e),r||"Value not expected to match: "+t)},TestCase.prototype.assertMatch=function(t,e,r){return QUnit.ok(t.test(e),r||"Expected: "+t+" \nGot: "+e)},TestCase.prototype.assertNoMatch=function(t,e,r){return QUnit.ok(!t.test(e),r||"Value not expected to match: "+t)},TestCase.prototype.assertDifference=function(expressions,difference,message,callback){var before,e,error,i,_i,_len,_results;for(null==difference&&(difference=1),"Array"!==Batman.typeOf(expressions)&&(expressions=[expressions]),2===arguments.length?(callback=difference,difference=1):3===arguments.length&&(callback=message,message=null),before=expressions.map(function(expression){return eval(expression)}),callback(),_results=[],i=_i=0,_len=expressions.length;_len>_i;i=++_i)e=expressions[i],error=""+e+" didn't change by "+difference,message&&(error=""+message+".\n"+error),_results.push(this.assertEqual(before[i]+difference,eval(e),error));return _results},TestCase.prototype.assertNoDifference=function(t,e,r){return 2===arguments.length&&(r=e,e=null),this.assertDifference(t,0,e,r)},TestCase.prototype.assertRaises=function(t,e,r){return QUnit.throws(e,t,r)},TestCase.prototype.stubAccessor=function(t,e,r){var n;return n=sinon.sandbox.stub(t.property(e),"getValue",r),t.property(e).refresh(),n},TestCase.prototype.addExpectation=function(t){return this._expectations[t]?this._expectations[t]++:this._expectations[t]=1},TestCase.prototype.addRefutation=function(t){return this._refutations[t]=0},TestCase.prototype.completeExpectation=function(t){return this._expectations[t]?(QUnit.ok(!0,"Completed "+t),1===this._expectations[t]?delete this._expectations[t]:this._expectations[t]--):void 0},TestCase.prototype.completeRefutation=function(t){return this._refutations[t]=1},TestCase.prototype.verifyExpectations=function(){var t,e,r,n,o,i;n=this._expectations;for(e in n)t=n[e],QUnit.ok(!1,"Expectation "+e+" did not callback "+t+" time(s)");o=this._refutations,i=[];for(e in o)r=o[e],r?i.push(QUnit.ok(!1,"Refutation "+e+" occurred")):i.push(QUnit.ok(!0,"Refutation "+e+" did not occur"));return i},TestCase.prototype.clearExpectations=function(){return this._expectations={},this._refutations={}},TestCase.prototype.expectationsWrapper=function(t){var e;return e=this,function(){var r;return e.clearExpectations(),r=t.apply(this,arguments),e.verifyExpectations(),r}},TestCase.prototype.xhrWrapper=function(t){return function(){return Batman.Request.setupMockedResponse(),t.apply(this,arguments)}},TestCase.prototype.assertGET=function(t,e){return this._assertXHR("GET",t,e)},TestCase.prototype.assertPOST=function(t,e){return this._assertXHR("POST",t,e)},TestCase.prototype.assertPUT=function(t,e){return this._assertXHR("PUT",t,e)},TestCase.prototype.assertDELETE=function(t,e){return this._assertXHR("DELETE",t,e)},TestCase.prototype.refuteGET=function(t){return this._refuteXHR("GET",t)},TestCase.prototype.refutePOST=function(t){return this._refuteXHR("POST",t)},TestCase.prototype.refutePUT=function(t){return this._refuteXHR("PUT",t)},TestCase.prototype.refuteDELETE=function(t){return this._refuteXHR("DELETE",t)},TestCase.prototype._assertXHR=function(t,e,r){var n;return n=""+t+" to "+e,this.addExpectation(n),Batman.Request.addMockedResponse(t,e,function(t){return function(){return t.completeExpectation(n),r||(r={}),r.status||(r.status=200),r.response||(r.response={}),r}}(this))},TestCase.prototype._refuteXHR=function(t,e){var n;return n=""+t+" to "+e,this.addRefutation(n),Batman.Request.addMockedResponse(t,e,function(t){return function(){return t.completeRefutation(n),{}}}(this))},TestCase.prototype._unwrapStringOrNumber=function(t){return t instanceof Number||t instanceof String?t.valueOf():t},TestCase.prototype._areEquivalent=function(t,e){var r,n,o,i;if(t=this._unwrapStringOrNumber(t),e=this._unwrapStringOrNumber(e),t===e)return!0;if(null===t||null===e||typeof t!=typeof e)return!1;if(t instanceof Date)return e instanceof Date&&t.valueOf()===e.valueOf();if("object"!=typeof t)return t===e;r=void 0===t.areEquivalent_Eq_91_2_34,n=void 0===e.areEquivalent_Eq_91_2_34;try{if(r)t.areEquivalent_Eq_91_2_34=[];else if(t.areEquivalent_Eq_91_2_34.some(function(t){return t===e}))return!0;if(n)e.areEquivalent_Eq_91_2_34=[];else if(e.areEquivalent_Eq_91_2_34.some(function(e){return e===t}))return!0;t.areEquivalent_Eq_91_2_34.push(e),e.areEquivalent_Eq_91_2_34.push(t),i={};for(o in t)"areEquivalent_Eq_91_2_34"!==o&&(i[o]=null);for(o in e)"areEquivalent_Eq_91_2_34"!==o&&(i[o]=null);for(o in i)if(!this._areEquivalent(t[o],e[o]))return!1;return!0}finally{r&&delete t.areEquivalent_Eq_91_2_34,n&&delete e.areEquivalent_Eq_91_2_34}},TestCase}(Batman.Object),function(){var t,e,r;return t=QUnit.push,r=function(t){return"[32m"+QUnit.jsDump.parse(t)+"[39m"},e=function(t){return"[31m"+QUnit.jsDump.parse(t)+"[39m"},QUnit.push=function(n,o,i,s){return s||(s=""+r(i)+" expected but was "+e(o)),t.call(QUnit,n,o,i,s)}}()},2:function(t,e,r){var n,o,i,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u=[].slice;i=r(1),n=r(20),t.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.mixin(n),e.prototype.assertValid=function(t,e){return null==e&&(e=""+t+" expected to be valid"),t.validate(function(t){return function(r,n){return t.assert(0===n.length,e)}}(this))},e.prototype.assertNotValid=function(t,e){return null==e&&(e=""+t+" expected to be not valid"),t.validate(function(t){return function(r,n){return t.assert(n.length>0,e)}}(this))},e.prototype.assertDecoders=function(){var t,e,r;return r=arguments[0],e=arguments.length>=2?u.call(arguments,1):[],t=[],r.prototype._batman.get("encoders").forEach(function(e,r){return r.decode?t.push(e):void 0}),this.assertEqual(e.sort(),t.sort())},e.prototype.assertEncoders=function(){var t,e,r;return r=arguments[0],e=arguments.length>=2?u.call(arguments,1):[],t=[],r.prototype._batman.get("encoders").forEach(function(e,r){return r.encode?t.push(e):void 0}),this.assertEqual(e.sort(),t.sort())},e.prototype.assertEncoded=function(t,e,r){var n;return n=t.toJSON()[e],"function"==typeof r?this.assert(r(n)):this.assertEqual(r,n)},e}(i)},3:function(t,e,r){var n,o,i,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=r(1),o=r(20),t.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.mixin(o),e.prototype.dispatch=function(t,e){var r,n,o,i,s,a,u,c,p,l;if(null==e&&(e={}),this.controllerClass||(this.controllerClass=Batman.currentApp[this.constructor.name.replace(/Test/,"")]),!this.controllerClass)throw Error("Unable to deduce controller class name from test class. Please set @controllerClass if not conventional");if(this.controller=e.controller||new this.controllerClass,n=Batman.helpers.camelize(this.controllerClass.name.replace(/Controller/,""),!0),u=Batman.currentApp.get("routes.routeMap"),r=u.childrenByOrder.filter(function(){return function(e){return e.controller===n&&e.action===t}}(this)),0===r.length)return this.assert(!1,"Route doesn't exist for action"),void 0;for(r[0].namedArguments.length>0&&this.assert(e.params,"params are required for action"),l=r[0].namedArguments,c=0,p=l.length;p>c;c++)a=l[c],this.assert(a in e.params,"named argument mismatch");this.assertEqual("function",typeof this.controller[t],"Action: "+t+" doesn't exist!");try{this.controller.dispatch(t,e.params),o=this.controller.get("currentView"),this.assert(o.get("html"),"No HTML for view"),i=document.createElement("div"),document.body.appendChild(i),o.get("node"),o.addToParentNode(i),o.propagateToSubviews("viewWillAppear"),o.initializeBindings(),o.propagateToSubviews("isInDOM",!0),o.propagateToSubviews("viewDidAppear")}catch(h){s=h,this.assert(!1,"exception was raised in view bindings: "+s.stack)}finally{null!=i&&document.body.removeChild(i)}return null},e}(i)},20:function(t){var n;t.exports=n={expectCreate:function(t,e){return null==e&&(e={}),this.addExpectation("expectCreate"),this.assert(t.isNew(),"Expected "+t.constructor.name+" to be new when saving"),this.stub(t,"save",function(r){return function(n){var o;return r.completeExpectation("expectCreate"),n(e.error,null!=(o=e.response)?o:t)}}(this))},expectUpdate:function(t,e){return null==e&&(e={}),this.addExpectation("expectUpdate"),this.assert(!t.isNew(),"Expected "+t.constructor.name+" to exist when saving"),this.stub(t,"save",function(r){return function(n){var o;return r.completeExpectation("expectUpdate"),n(e.error,null!=(o=e.response)?o:t)}}(this))},expectDestroy:function(t,e){return null==e&&(e={}),this.addExpectation("expectDestroy"),this.stub(t,"destroy",function(r){return function(n){var o;return r.completeExpectation("expectDestroy"),n(e.error,null!=(o=e.response)?o:t)}}(this))},expectLoad:function(t,e){return null==e&&(e={}),this.addExpectation("expectLoad"),this.stub(t,"load",function(t){return function(r,n){var o;return("function"==(o=typeof r)||"undefined"===o)&&(n=r),null!=e.params&&t.assertEqual(e.params,r),t.completeExpectation("expectLoad"),"function"==typeof n?n(e.error,e.response):void 0}}(this))},expectFind:function(t,e){return null==e&&(e={}),this.addExpectation("expectFind"),this.stub(t,"find",function(t){return function(r,n){var o;return("function"==(o=typeof r)||"undefined"===o)&&(n=r),null!=e.params&&t.assertEqual(e.params,r),t.completeExpectation("expectFind"),"function"==typeof n?n(e.error,e.response):void 0}}(this))}}}});